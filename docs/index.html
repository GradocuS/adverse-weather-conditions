<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Неблагоприятные метеорологические условия (НМУ)</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
  </head>
  <body style="padding: 2rem 0">
    <div class="container">
      <h1>Неблагоприятные метеорологические условия</h1>
      <p class="lead">
        Неблагоприятные метеорологические условия (НМУ) – метеорологические (погодные) условия, способствующие накоплению вредных (загрязняющих) веществ в приземном слое атмосферного воздуха.
      </p>
      <p>
        В репозитории размещены данные о НМУ, собранные из официальных открытых источников, в формате <code>JSON</code>.
      </p>
      <h3 id="visualization">
        Визуализация имеющихся данных
      </h3>
      <div class="form-row">
        <div class="form-group col-xs-12 col-md-8">
          <label for="vSources">Источник данных:</label>
          <select id="vSources" class="form-control custom-select">
          </select>
        </div>
        <div class="form-group col-xs-12 col-md-4">
          <label for="vCities">Город:</label>
          <select id="vCities" class="form-control custom-select">
          </select>
        </div>
      </div>
      <p id="vCharts" class="text-center"></p>
      <h3 id="formats">
        Описание структуры файлов
      </h3>
      <p>
        Структура источников данных (<code>/data/sources.json</code>):
      </p>
      <pre class="highlight" style="padding: 1.2rem; background-color: #f7f7f7;">{
    "atime": "2017-11-19T07:30:27Z",
    "cities": [{
        "name": {
            "en": "Chelyabinsk",
            "ru": "Челябинск"
        },
        "path": "chelyabinsk"
    }],
    "name": {
        "en": "City administration of Chelyabinsk",
        "ru": "Администрация города Челябинска"
    },
    "url": {
        "domain": "cheladmin.ru",
        "root": {
            "en": "https://cheladmin.ru/en",
            "ru": "https://cheladmin.ru/ru"
        }
    }
}</pre>
      <p>
        Каждый источник содержит время последнего обращения (<code>atime</code>), список городов (<code>cities</code>), название (<code>name</code>) и информацию об адресе источника (<code>url.domain</code> используется только для получения пути к файлу данных сообщений о НМУ).
      </p>
      <p>
        Структура сообщений о НМУ (<code>/data/{ source.url.domain }/{ city.path }.json</code>):
      </p>
      <pre class="highlight" style="padding: 1.2rem; background-color: #f7f7f7;">{
    "daterange": [
        "2015-05-26T19:00:00+05:00",
        "2015-05-27T19:00:00+05:00"
    ],
    "level": 1,
    "path": "soobshcheniya-o-nmu"
}</pre>
      <p>
        Как правило, источники содержат информацию о НМУ в следующем виде:
      </p>
      <blockquote class="blockquote" style="border-left: 5px solid #eee;
    padding: 10px 20px;">
        <p class="mb-0">
          ... с 19.00 часов 26.05.2015 до 19.00 часов 27.05.2015 ожидаются НМУ 1 степени опасности ...
        </p>
      </blockquote>
      <p>
        Период действия предупреждения о НМУ (<code>daterange</code>) приведен к формату ISO 8601 с указание местного часового пояса (<code>YYYY-MM-DDThh:mm:ss±hh:mm</code>). Параметр <code>path</code> используется для формирования ссылки непосредственно на источник информации: <code>{ source.url.root.ru }/{ path }</code>.
      </p>
      <h3 id="sources">
        Иcточники
      </h3>
      <ul id="sources-list"></ul>
    </div>
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="/scripts/awc.js"></script>
  </body>
</html>
